dist: trusty
sudo: false
language: python

python:
- 3.5

branches:
    only:
        - master

env:
  matrix:
    - python=3.5 CONDA_PY=35 OPENEYE_CHANNEL="-i https://pypi.anaconda.org/openeye/channel/main/simple"
  global:
    - ORGNAME="omnia"
    - PACKAGENAME="oeommtools"
    - OE_LICENSE="$HOME/oe_license.txt"

before_install:
- openssl aes-256-cbc -K $encrypted_b67118b96bf1_key -iv $encrypted_b67118b96bf1_iv -in oe_license.txt.enc -out oe_license.txt -d
- wget https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh -O miniconda.sh
- bash miniconda.sh -b -p $HOME/miniconda
- export PATH=$HOME/miniconda/bin:$PATH
- hash -r
- conda config --set always_yes true --set changeps1 no
- conda update --yes -q conda
- conda info -a

install:
- pip install -i https://pypi.anaconda.org/OpenEye/simple OpenEye-toolkits

script:
- conda install conda-build --yes
- conda config --add channels ${ORGNAME}
- conda build devtools/conda-recipe
- conda create --yes -n openeye python=$python
- source activate openeye
- conda install --use-local oeommtools --yes
- ls
- conda list
# Test
- py.test -v -s tests




